{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"Page with posts\", -1\n/* HOISTED */\n);\n\nconst _hoisted_2 = {\n  class: \"app__btns\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Сreate a post \");\n\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = {\n  class: \"observer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_my_input = _resolveComponent(\"my-input\");\n\n  const _component_my_button = _resolveComponent(\"my-button\");\n\n  const _component_my_select = _resolveComponent(\"my-select\");\n\n  const _component_post_form = _resolveComponent(\"post-form\");\n\n  const _component_my_dialog = _resolveComponent(\"my-dialog\");\n\n  const _component_post_list = _resolveComponent(\"post-list\");\n\n  const _directive_intersection = _resolveDirective(\"intersection\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createVNode(_component_my_input, {\n    modelValue: $data.searchQuery,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchQuery = $event),\n    placeholder: \"search...\"\n  }, null, 8\n  /* PROPS */\n  , [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_my_button, {\n    onClick: $options.showDialog\n  }, {\n    default: _withCtx(() => [_hoisted_3]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"onClick\"]), _createVNode(_component_my_select, {\n    modelValue: $data.selectedSort,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.selectedSort = $event),\n    options: $data.sortOptions\n  }, null, 8\n  /* PROPS */\n  , [\"modelValue\", \"options\"])]), _createVNode(_component_my_dialog, {\n    show: $data.dialogVisible,\n    \"onUpdate:show\": _cache[2] || (_cache[2] = $event => $data.dialogVisible = $event)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_post_form, {\n      onCreate: $options.createPost\n    }, null, 8\n    /* PROPS */\n    , [\"onCreate\"])]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"show\"]), !$data.isPostsLoading ? (_openBlock(), _createBlock(_component_post_list, {\n    key: 0,\n    posts: $options.sortAndSearchedPosts,\n    onRemove: $options.removePost\n  }, null, 8\n  /* PROPS */\n  , [\"posts\", \"onRemove\"])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \" Downloading... \")), _withDirectives(_createElementVNode(\"div\", _hoisted_5, null, 512\n  /* NEED_PATCH */\n  ), [[_directive_intersection, _ctx.loadMorePostst]])]);\n}","map":{"version":3,"mappings":";;gCAGQA,oBAAwB,IAAxB,EAAwB,IAAxB,EAAI,iBAAJ,EAAmB;AAAA;AAAnB;;;EAKKC,KAAK,EAAC;;;iDAIV;;;;;;EA0BoCA,KAAK,EAAC;;;;;;;;;;;;;;;;;uBArC/CC,oBAuCM,KAvCN,EAuCM,IAvCN,EAuCM,CArCFC,UAqCE,EApCFC,aAGEC,mBAHF,EAGE;gBAFOC,iBAEP;+DAFOA,oBAAWC,OAElB;IADFC,WAAW,EAAC;EACV,CAHF;;EAAA,iBAoCE,EAhCFR,oBAYM,KAZN,cAYM,CAVNI,aAIYK,oBAJZ,EAIY;IAHXC,OAAK,EAAEC;EAGI,CAJZ,EACkB;sBACjB,MAED,aAHkB;;;;EAAA,CADlB;;EAAA,cAUM,EAJNP,aAGEQ,oBAHF,EAGE;gBAFWN,kBAEX;+DAFWA,qBAAYC,OAEvB;IADGM,OAAO,EAAEP;EACZ,CAHF;;EAAA,4BAIM,CAZN,CAgCE,EAlBFF,aAIYU,oBAJZ,EAIY;IAJOC,IAAI,EAAET,mBAIb;yDAJaA,sBAAaC;EAI1B,CAJZ;sBACA,MAEE,CAFFH,aAEEY,oBAFF,EAEE;MADDC,QAAM,EAAEN;IACP,CAFF,EACmB,IADnB,EACmB;IAAA;IADnB,EACmB,YADnB,CAEE;;;;GAHF;;EAAA,WAkBE,GATKL,sCAHPY,aAIEC,oBAJF,EAIE;UAAA;IAHDC,KAAK,EAAET,6BAGN;IAFDU,QAAM,EAAEV;EAEP,CAJF;;EAAA,2CAMAT,oBAEM,KAFN,EAEMoB,UAFN,EAAa,kBAAb,EAME,kBAFFtB,oBAA4D,KAA5D,cAA4D,IAA5D,EAA4D;EAAA;EAA5D,GAA4D,2BAAvCuB,oBAAuC,EAE1D,CAvCN","names":["_createElementVNode","class","_createElementBlock","_hoisted_1","_createVNode","_component_my_input","$data","$event","placeholder","_component_my_button","onClick","$options","_component_my_select","options","_component_my_dialog","show","_component_post_form","onCreate","_createBlock","_component_post_list","posts","onRemove","_hoisted_4","_ctx"],"sourceRoot":"","sources":["C:\\Users\\Annni\\Desktop\\myPurpose\\training\\project1\\src\\pages\\PostPage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <h3>Page with posts</h3>\r\n        <my-input\r\n        v-model=\"searchQuery\"\r\n        placeholder=\"search...\"\r\n        />\r\n        <div class=\"app__btns\">\r\n\r\n        <my-button\r\n        @click=\"showDialog\"\r\n        >\r\n        Сreate a post\r\n        </my-button>\r\n        \r\n        <my-select\r\n            v-model=\"selectedSort\"\r\n            :options=\"sortOptions\"\r\n        />\r\n        </div>\r\n        \r\n        <my-dialog v-model:show=\"dialogVisible\">\r\n        <post-form\r\n        @create=\"createPost\"\r\n        />\r\n        </my-dialog>\r\n\r\n        <post-list\r\n        :posts=\"sortAndSearchedPosts\"\r\n        @remove=\"removePost\"\r\n        v-if=\"!isPostsLoading\"\r\n        />\r\n\r\n        <div v-else >\r\n        Downloading...\r\n        </div>\r\n\r\n        <div v-intersection=\"loadMorePostst\" class=\"observer\"></div>\r\n\r\n    </div>\r\n</template>\r\n  \r\n  \r\n<script>  \r\nimport PostForm from \"@/components/PostForm.vue\";\r\nimport PostList from \"@/components/PostList.vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\ncomponents: {\r\n    PostForm,\r\n    PostList,\r\n},\r\n\r\ndata() {\r\n    return{\r\n    posts: [],\r\n    dialogVisible: false,\r\n    isPostsLoading: false,\r\n    selectedSort: '',\r\n    searchQuery: '',\r\n    page: 1,\r\n    limit: 10,\r\n    totalPage: 0,\r\n    sortOptions: [\r\n        {value: 'title', name: 'By title'},\r\n        {value: 'body', name: 'By body'},\r\n    ]\r\n    }\r\n},\r\n\r\nmethods: {\r\n    createPost(post) {\r\n    this.posts.push(post);\r\n    this.dialogVisible = false;\r\n    },\r\n    removePost(post) {\r\n    this.posts = this.posts.filter(p => p.id !== post.id)\r\n    },\r\n    showDialog() {\r\n    this.dialogVisible = true;\r\n    },\r\n    async fetchPosts() {\r\n    try {\r\n        this.isPostsLoading = true;\r\n        const response = await axios.get(\"https://jsonplaceholder.typicode.com/posts\", {\r\n        params: {\r\n            _page: this.page,\r\n            _limit: this.limit,\r\n        }\r\n        })\r\n        this.totalPages = Math.ceil(response.headers['x-total-count'] / this.limit)\r\n        this.posts = response.data;\r\n    } catch (e) {\r\n        alert('Error')\r\n    } finally {\r\n        this.isPostsLoading = false;\r\n    }\r\n    },\r\n    async loadMorePosts() {\r\n    try {\r\n        this.page += 1;\r\n        const response = await axios.get(\"https://jsonplaceholder.typicode.com/posts\", {\r\n        params: {\r\n            _page: this.page,\r\n            _limit: this.limit,\r\n        }\r\n        })\r\n        this.totalPages = Math.ceil(response.headers['x-total-count'] / this.limit)\r\n        this.posts = [...this.posts, ...response.data]\r\n    } catch (e) {\r\n        alert('Error')\r\n    } \r\n    },\r\n},\r\ncomputed: {\r\n    sortedPosts() {\r\n    return [...this.posts].sort((post1,post2) => {\r\n        return post1[this.selectedSort]?.localeCompare(post2[this.selectedSort])\r\n    })\r\n    },\r\n    sortAndSearchedPosts() {\r\n    return this.sortedPosts.filter(post => post.title.toLowerCase().includes(this.searchQuery.toLowerCase()))\r\n    }\r\n},\r\nmounted() {\r\nthis.fetchPosts();\r\n},\r\n}\r\n</script>\r\n  \r\n  \r\n<style>\r\n\r\n.app__btns {\r\nmargin: 15px 0;\r\ndisplay: flex;\r\njustify-content: space-between; /* кнопка напротив выпадающего списка */\r\n}\r\n.observer {\r\nheight: 30px;\r\n}\r\n</style>\r\n  "]},"metadata":{},"sourceType":"module"}